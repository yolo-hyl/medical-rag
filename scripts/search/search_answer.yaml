milvus:
  client:
    uri: "http://localhost:19530"
    token: "root:Milvus"
    db_name: ""                
    timeout_ms: 30000
    tls: false
    tls_verify: false          
  collection:
    name: "medical_knowledge"  
    description: "RAG QA knowledge base"  
    load_on_start: true
    properties:
search:
  default_limit: 10
  output_fields: ["question","answer","departments","categories","source"]
  pagination:
    page_size: 10
    max_pages: 1
  rrf:
    enabled: true   
    k: 100
  channels:
    - name: dense_doc
      field: dense_vec_text
      enabled: true
      kind: dense_query
      metric_type: COSINE
      limit: 5
      params: { ef: 256 }
      expr: ''
      weight: 0.3
    - name: sparse_vec_text
      field: sparse_vec_text
      enabled: true
      kind: sparse_query
      metric_type: IP
      limit: 5
      params: { drop_ratio_search: 0.0 }
      expr: ''
      weight: 0.3
    - name: dense_q
      field: dense_vec_summary
      enabled: true
      kind: dense_query
      metric_type: COSINE
      limit: 5
      params: { ef: 256 }
      expr: ''   
      weight: -1
    - name: sparse_doc
      field: sparse_vec_qa
      enabled: false
      kind: sparse_document
      metric_type: IP
      limit: 5
      params: { drop_ratio_search: 0.0 }
      expr: ''   
      weight: 0.4

# 添加embedding配置，这是search需要的
embedding:
  dense:
    provider: ollama                  # ollama | openai | hf
    model: "bge-m3:latest"
    base_url: "http://172.16.40.51:11434"
    dim: 1024
    normalize: false
    max_concurrent: 8
    proxy: 
    verify: true 
    max_retries: 5
    backoff_base: 0.5
    backoff_cap: 4.0
    prefixes:
      query: ""
      document: ""
  sparse_bm25:
    vocab_path: "vocab.pkl.gz"
    domain_model: "medicine"
    prune_empty_sparse: true
    empty_sparse_fallback: { "0": 0.0 }
    k1: 1.5
    b: 0.75